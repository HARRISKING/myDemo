<!doctype html>
<html>
<head>
  <link rel="stylesheet" href="./index.css">
</head>
<body>

  <form class="box-all">
    <input class="city-name" type="text" name="city" value="">
    <input class="btn-sub" type="submit" name="" value="提交">
    <div class="show-info"></div>
  </form>
  <!--<h2>
    天气 <span class="weather"></span>
  </h2>-->
  <script>

    var btn = document.getElementsByClassName('btn-sub')[0];
    var city = document.querySelector('.city-name');
    var info = document.querySelector('.show-info');
    console.log(city.value)


    var xhr = new XMLHttpRequest;
    var url = 'http://api.jirengu.com/weather.php?city=' + city.value;
    xhr.onload = function(){
      var weather = JSON.parse(this.responseText);
      info.innerText = weather.results[0].weather_data[0].weather;
    }
    xhr.open('GET', url, true)
    xhr.send()

    // btn.addEventListener('click',function(){
    //   var xhr = new XMLHttpRequest();
    //   var cityInfo = city.value;
    //   console.log(cityInfo);

    //   // xhr.onreadystatechange = function(){
    //   //   if(xhr.readyState === 4 && (xhr.status === 200 || xhr.status ===304)){
    //       var weather = JSON.parse(this.responseText);
    //       console.log(weather.results[0].weather_data[0].weather)
    //       info.innerText = weather.results[0].weather_data[0].weather;
    //     // }
    //   // }
    //   xhr.open('GET','http://api.jirengu.com/weather.php?city=杭州','true');
    //   xhr.send();
    // })




    // var btn = document.querySelector('.query-area button')
    // var input = document.querySelector('.query-area input')
    

    // btn.addEventListener('click', function(){
    //    var xhr = new XMLHttpRequest()
    //    xhr.onreadystatechange = function(){
    //      if(xhr.readyState === 4 && (xhr.status === 200 || xhr.status === 304)){
    //       var friends = JSON.parse(xhr.responseText)
    //       render(friends)
    //      }
    //    }

    //   xhr.open('get', '/getFriends?username=' + input.value, true)
    //   xhr.send()
    // })




    // function render(friends){
    //   var detailCt = document.querySelector('.detail-area ul')
    //   detailCt.innerHTML = '';
    //   var ct = document.createDocumentFragment()
    //   for(var i = 0; i < friends.length; i++){
    //     var node = document.createElement('li')
    //     node.innerText = friends[i]
    //     ct.appendChild(node)
    //   }
    //   detailCt.appendChild(ct)
    // }
  </script>
  
</body>
</html>
